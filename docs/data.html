<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data | EDAV Final Project (Group 9)</title>
  <meta name="description" content="Chapter 3 Data | EDAV Final Project (Group 9)" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data | EDAV Final Project (Group 9)" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data | EDAV Final Project (Group 9)" />
  
  
  

<meta name="author" content="Cong Chen, Taichen Zhou, Yichen Huang" />


<meta name="date" content="2022-12-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="proposal.html"/>
<link rel="next" href="results.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">EDAV Final Project V1</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic"><i class="fa fa-check"></i><b>2.1</b> Research topic</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="proposal.html"><a href="proposal.html#tuberculosistb-notification-and-outcome-dataset"><i class="fa fa-check"></i><b>2.2.1</b> Tuberculosis(TB) notification and outcome dataset</a></li>
<li class="chapter" data-level="2.2.2" data-path="proposal.html"><a href="proposal.html#vaccination-dataset"><i class="fa fa-check"></i><b>2.2.2</b> Vaccination dataset</a></li>
<li class="chapter" data-level="2.2.3" data-path="proposal.html"><a href="proposal.html#population-dataset"><i class="fa fa-check"></i><b>2.2.3</b> Population dataset</a></li>
<li class="chapter" data-level="2.2.4" data-path="proposal.html"><a href="proposal.html#number-of-new-hiv-infections"><i class="fa fa-check"></i><b>2.2.4</b> Number of new HIV infections</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#sources"><i class="fa fa-check"></i><b>3.1</b> Sources</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#tuberculosistb-notification-and-outcome-dataset-1"><i class="fa fa-check"></i><b>3.1.1</b> Tuberculosis(TB) notification and outcome dataset</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#vaccination-dataset-1"><i class="fa fa-check"></i><b>3.1.2</b> Vaccination dataset</a></li>
<li class="chapter" data-level="3.1.3" data-path="data.html"><a href="data.html#population-dataset-1"><i class="fa fa-check"></i><b>3.1.3</b> Population dataset</a></li>
<li class="chapter" data-level="3.1.4" data-path="data.html"><a href="data.html#number-of-new-hiv-infections-1"><i class="fa fa-check"></i><b>3.1.4</b> Number of new HIV infections</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#cleaning-transformation"><i class="fa fa-check"></i><b>3.2</b> Cleaning / transformation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#tb-notification-and-outcome-dataset"><i class="fa fa-check"></i><b>3.2.1</b> TB notification and outcome dataset</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#vaccination-dataset-2"><i class="fa fa-check"></i><b>3.2.2</b> Vaccination dataset</a></li>
<li class="chapter" data-level="3.2.3" data-path="data.html"><a href="data.html#population"><i class="fa fa-check"></i><b>3.2.3</b> Population</a></li>
<li class="chapter" data-level="3.2.4" data-path="data.html"><a href="data.html#hiv-infections"><i class="fa fa-check"></i><b>3.2.4</b> HIV infections</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.3</b> Missing value analysis</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data.html"><a href="data.html#tb-notification-and-outcome-dataset-1"><i class="fa fa-check"></i><b>3.3.1</b> TB notification and outcome dataset</a></li>
<li class="chapter" data-level="3.3.2" data-path="data.html"><a href="data.html#vaccination-dataset-3"><i class="fa fa-check"></i><b>3.3.2</b> Vaccination dataset</a></li>
<li class="chapter" data-level="3.3.3" data-path="data.html"><a href="data.html#hiv-infections-1"><i class="fa fa-check"></i><b>3.3.3</b> HIV infections</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive component</a></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">EDAV Final Project (Group 9)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="sources" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Sources<a href="data.html#sources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="tuberculosistb-notification-and-outcome-dataset-1" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Tuberculosis(TB) notification and outcome dataset<a href="data.html#tuberculosistb-notification-and-outcome-dataset-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The source of the dataset is the global tuberculosis report published by World Health Organization(WHO). The dataset provided by countries to WHO and estimates of TB burden generated by WHO for the Global Tuberculosis Report.[Global Tuberculosis Report] (<a href="https://www.who.int/teams/global-tuberculosis-programme/data" class="uri">https://www.who.int/teams/global-tuberculosis-programme/data</a>)</li>
<li>The column explanation(dictionary) is also contained in the link above. The data dictionary file will cover variable names with corresponding definitions. For the categorical variables, the dictionary will also provide the encoding method and meaning of the code.</li>
<li>Countries provide the data to WHO and we are not sure how exactly those countries collected the data. We conjecture that the data are collected from every hospital by national public health agencies like the Centers for Disease Control and Prevention in the United States. Because the dataset contains the TB data from 1980 to 2021, the collection method may also vary.</li>
<li>The TB dataset is in CSV(comma-separated value). We can apply read.csv() in R to import the CSV file to the R data frame.</li>
<li>The TB dataset contains the annual data for the period of 41 years, so we assume that the frequency of updates is once per year. The TB dataset is composed of 198 features of TB data from 217 countries from 1980 to 2021, although there are huge amounts of missing data which will be handled in future analysis.</li>
<li>The TB dataset contains 595 variables including the budget, community engagement, contacts preventive treatment, estimates, outcomes, etc.</li>
<li>According to the topics we are interested in, we cannot analyze all variables. There are several potentially related features can be drawn from the dataset.
<ul>
<li>c_newinc (Total of new and relapse cases and cases with unknown previous TB treatment history)</li>
<li>age_group (in years)</li>
<li>e_inc_tbhiv_num (Estimated incidence of TB cases who are HIV-Positive)</li>
<li>Etc.</li>
</ul></li>
</ul>
</div>
<div id="vaccination-dataset-1" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Vaccination dataset<a href="data.html#vaccination-dataset-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The source is from the United Nations International Children’s Emergency Fund(UNICEF) which is an agency of the United Nations responsible for providing humanitarian and developmental aid to children worldwide. The UNICEF data will cover the situation of children and women worldwide. [Immunization Data] (<a href="https://data.unicef.org/resources/dataset/immunization/" class="uri">https://data.unicef.org/resources/dataset/immunization/</a>)</li>
<li>According to the UNICEF data and analytics introduction, UNICEF’s Data Team is responsible for the collection, validation, analysis, use, and communication of the most statistically sound. The team upholds the quality, integrity, and organization of these data. [UNICEF Data] (<a href="https://data.unicef.org/about-us/" class="uri">https://data.unicef.org/about-us/</a>)</li>
<li>The collected data is in Microsoft Excel Spreadsheet format(.xlsx). The data set is updated annually for 168 countries worldwide from 1980 - 2021.</li>
<li>Same as the CSV file, the .xlsx file can be imported to R and converted to the data frame by the readxl package.</li>
<li>The structure of the dataset is clear; the spreadsheet covers the BCG vaccination rate for 168 countries in the world in past 41 years. The dataset is not perfect, there exists some missing data for some countries in the period of time. It may cause some problems for our future analysis.</li>
<li>The number of countries recorded in the spreadsheet from UNICEF is less than the number of countries covered in the WHO dataset. Therefore, during the analysis of the TB and BCG vaccines, some countries will be ignored.</li>
</ul>
</div>
<div id="population-dataset-1" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Population dataset<a href="data.html#population-dataset-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The source is from the World Bank(WB) which is an international financial institution that provides loans and grants to the government of low- and middle income countries for the purpose of pursing capital projects. <a href="https://data.worldbank.org/indicator/SP.POP.TOTL?end=1989&amp;start=1960">Population Data</a></li>
<li>The data set is covered all 266 countries in the world and the year covered is from 1980 to 2021.</li>
<li>The variables are mostly discrete expect for some categorical variables indicate each country.</li>
</ul>
</div>
<div id="number-of-new-hiv-infections-1" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Number of new HIV infections<a href="data.html#number-of-new-hiv-infections-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The source is from Institute for Health Metrics and Evaluation, Global Burden of Disease(2019). <a href="http://ghdx.healthdata.org/gbd-results-tool">HIV Infection Data</a></li>
<li>The data set collects data from WHO member countries and time span for the data set is 1990-2019.</li>
<li>There are 266 countries in total, and the variables we focused on are all discrete integer.</li>
</ul>
</div>
</div>
<div id="cleaning-transformation" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Cleaning / transformation<a href="data.html#cleaning-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Import Library</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-2"><a href="data.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="data.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(redav)</span>
<span id="cb1-4"><a href="data.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mi)</span></code></pre></div>
<div id="tb-notification-and-outcome-dataset" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> TB notification and outcome dataset<a href="data.html#tb-notification-and-outcome-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Import data</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data.html#cb2-1" aria-hidden="true" tabindex="-1"></a>tb <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Datasets/raw/TB_notifications_2022-10-28.csv&quot;</span>)</span>
<span id="cb2-2"><a href="data.html#cb2-2" aria-hidden="true" tabindex="-1"></a>tb_cleaning <span class="ot">&lt;-</span> <span class="fu">select</span>(tb, country, iso3, year, new_sp, new_labconf, c_newinc, newrel_hivtest, newrel_hivpos, hivtest, hivtest_pos, new_sp_m014, new_sp_m1524, new_sp_m2534, new_sp_m3544, new_sp_m4554, new_sp_m5564, new_sp_m65, newrel_m014, newrel_m1524, newrel_m2534, newrel_m3544, newrel_m4554, newrel_m5564, newrel_m65, new_sp_f014, new_sp_f1524, new_sp_f2534, new_sp_f3544, new_sp_f4554, new_sp_f5564, new_sp_f65, newrel_f014, newrel_f1524, newrel_f2534, newrel_f3544, newrel_f4554, newrel_f5564, newrel_f65)</span></code></pre></div>
<ul>
<li><p>Variable Selection</p></li>
<li><p>Merge Data</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data.html#cb3-1" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1 <span class="ot">&lt;-</span> tb_cleaning</span>
<span id="cb3-2"><a href="data.html#cb3-2" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_m014 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_m014, tb_cleaning<span class="sc">$</span>newrel_m014)</span>
<span id="cb3-3"><a href="data.html#cb3-3" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_m1524 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_m1524, tb_cleaning<span class="sc">$</span>newrel_m1524)</span>
<span id="cb3-4"><a href="data.html#cb3-4" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_m2534 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_m2534, tb_cleaning<span class="sc">$</span>newrel_m2534)</span>
<span id="cb3-5"><a href="data.html#cb3-5" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_m3544 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_m3544, tb_cleaning<span class="sc">$</span>newrel_m3544)</span>
<span id="cb3-6"><a href="data.html#cb3-6" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_m4554 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_m4554, tb_cleaning<span class="sc">$</span>newrel_m4554)</span>
<span id="cb3-7"><a href="data.html#cb3-7" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_m5564 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_m5564, tb_cleaning<span class="sc">$</span>newrel_m5564)</span>
<span id="cb3-8"><a href="data.html#cb3-8" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_m65 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_m65, tb_cleaning<span class="sc">$</span>newrel_m65)</span>
<span id="cb3-9"><a href="data.html#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="data.html#cb3-10" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_f014 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_f014, tb_cleaning<span class="sc">$</span>newrel_f014)</span>
<span id="cb3-11"><a href="data.html#cb3-11" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_f1524 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_f1524, tb_cleaning<span class="sc">$</span>newrel_f1524)</span>
<span id="cb3-12"><a href="data.html#cb3-12" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_f2534 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_f2534, tb_cleaning<span class="sc">$</span>newrel_m2534)</span>
<span id="cb3-13"><a href="data.html#cb3-13" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_f3544 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_f3544, tb_cleaning<span class="sc">$</span>newrel_m3544)</span>
<span id="cb3-14"><a href="data.html#cb3-14" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_f4554 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_f4554, tb_cleaning<span class="sc">$</span>newrel_f4554)</span>
<span id="cb3-15"><a href="data.html#cb3-15" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_f5564 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_f5564, tb_cleaning<span class="sc">$</span>newrel_f5564)</span>
<span id="cb3-16"><a href="data.html#cb3-16" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>new_sp_f65 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2012</span>, tb_cleaning<span class="sc">$</span>new_sp_f65, tb_cleaning<span class="sc">$</span>newrel_f65)</span>
<span id="cb3-17"><a href="data.html#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="data.html#cb3-18" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>hivtest <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2014</span>, tb_cleaning<span class="sc">$</span>hivtest, tb_cleaning<span class="sc">$</span>newrel_hivtest)</span>
<span id="cb3-19"><a href="data.html#cb3-19" aria-hidden="true" tabindex="-1"></a>tb_cleaning_1<span class="sc">$</span>hivtest_pos <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(tb_cleaning<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2014</span>, tb_cleaning<span class="sc">$</span>hivtest_pos, tb_cleaning<span class="sc">$</span>newrel_hivpos)</span></code></pre></div>
<ul>
<li>Remove missing data</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data.html#cb4-1" aria-hidden="true" tabindex="-1"></a>tb_cleaning_2 <span class="ot">&lt;-</span> <span class="fu">select</span>(tb_cleaning_1, country, iso3, year, new_sp, new_labconf, c_newinc, hivtest, hivtest_pos, new_sp_m014, new_sp_m1524, new_sp_m2534, new_sp_m3544, new_sp_m4554, new_sp_m5564, new_sp_m65, new_sp_f014, new_sp_f1524, new_sp_f2534, new_sp_f3544, new_sp_f4554, new_sp_f5564, new_sp_f65)</span>
<span id="cb4-2"><a href="data.html#cb4-2" aria-hidden="true" tabindex="-1"></a>tb_cleaning_3 <span class="ot">&lt;-</span> <span class="fu">subset</span>(tb_cleaning_2, <span class="fu">is.na</span>(c_newinc) <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb4-3"><a href="data.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tb_cleaning_3)</span></code></pre></div>
<pre><code>##    country              iso3                year          new_sp        new_labconf        c_newinc            hivtest           hivtest_pos    
##  Length:8380        Length:8380        Min.   :1980   Min.   :     0   Min.   :     0   Min.   :      0.0   Min.   :      0.0   Min.   :     0  
##  Class :character   Class :character   1st Qu.:1990   1st Qu.:    99   1st Qu.:   117   1st Qu.:    223.8   1st Qu.:     63.0   1st Qu.:     1  
##  Mode  :character   Mode  :character   Median :2001   Median :  1056   Median :  1137   Median :   2157.5   Median :    839.5   Median :    38  
##                                        Mean   :2001   Mean   :  9885   Mean   : 12950   Mean   :  22435.2   Mean   :  14641.8   Mean   :  2246  
##                                        3rd Qu.:2011   3rd Qu.:  5014   3rd Qu.:  5326   3rd Qu.:   9704.0   3rd Qu.:   5801.8   3rd Qu.:   539  
##                                        Max.   :2021   Max.   :642321   Max.   :908925   Max.   :2162323.0   Max.   :1868972.0   Max.   :211128  
##                                                       NA&#39;s   :4478     NA&#39;s   :4301                         NA&#39;s   :5068        NA&#39;s   :5101    
##   new_sp_m014       new_sp_m1524     new_sp_m2534       new_sp_m3544     new_sp_m4554     new_sp_m5564      new_sp_m65        new_sp_f014     
##  Min.   :    0.0   Min.   :     0   Min.   :     0.0   Min.   :     0   Min.   :     0   Min.   :     0   Min.   :     0.0   Min.   :    0.0  
##  1st Qu.:    1.0   1st Qu.:    10   1st Qu.:    16.0   1st Qu.:    16   1st Qu.:    14   1st Qu.:    11   1st Qu.:    10.0   1st Qu.:    1.0  
##  Median :   11.0   Median :   108   Median :   180.0   Median :   153   Median :   124   Median :    79   Median :    73.0   Median :   13.0  
##  Mean   :  436.6   Mean   :  1591   Mean   :  2090.9   Mean   :  1999   Mean   :  1825   Mean   :  1450   Mean   :  1274.3   Mean   :  439.4  
##  3rd Qu.:   83.0   3rd Qu.:   602   3rd Qu.:   880.8   3rd Qu.:   722   3rd Qu.:   573   3rd Qu.:   386   3rd Qu.:   362.8   3rd Qu.:   93.0  
##  Max.   :73692.0   Max.   :234693   Max.   :233598.0   Max.   :221347   Max.   :224486   Max.   :201253   Max.   :156697.0   Max.   :71882.0  
##  NA&#39;s   :3433      NA&#39;s   :3433     NA&#39;s   :3432       NA&#39;s   :3418     NA&#39;s   :3413     NA&#39;s   :3419     NA&#39;s   :3430       NA&#39;s   :3435     
##   new_sp_f1524       new_sp_f2534     new_sp_f3544       new_sp_f4554      new_sp_f5564       new_sp_f65      
##  Min.   :     0.0   Min.   :     0   Min.   :     0.0   Min.   :    0.0   Min.   :    0.0   Min.   :    0.00  
##  1st Qu.:     8.0   1st Qu.:    12   1st Qu.:     8.0   1st Qu.:    6.0   1st Qu.:    4.0   1st Qu.:    5.75  
##  Median :    85.0   Median :   117   Median :    83.0   Median :   48.0   Median :   33.0   Median :   41.00  
##  Mean   :  1340.2   Mean   :  1776   Mean   :  1564.0   Mean   :  811.9   Mean   :  620.9   Mean   :  582.09  
##  3rd Qu.:   484.5   3rd Qu.:   681   3rd Qu.:   512.5   3rd Qu.:  273.0   3rd Qu.:  200.0   3rd Qu.:  208.00  
##  Max.   :234815.0   Max.   :233598   Max.   :221347.0   Max.   :90181.0   Max.   :73693.0   Max.   :60830.00  
##  NA&#39;s   :3446       NA&#39;s   :3437     NA&#39;s   :3437       NA&#39;s   :3433      NA&#39;s   :3444      NA&#39;s   :3444</code></pre>
</div>
<div id="vaccination-dataset-2" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Vaccination dataset<a href="data.html#vaccination-dataset-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Read Data</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data.html#cb6-1" aria-hidden="true" tabindex="-1"></a>vaccine <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">&quot;../vaccine.xlsx&quot;</span>)</span>
<span id="cb6-2"><a href="data.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(vaccine)</span></code></pre></div>
<pre><code>##  unicef_region          iso3             country            vaccine               2021            2020            2019           2018            2017      
##  Length:168         Length:168         Length:168         Length:168         Min.   : 0.00   Min.   : 0.00   Min.   : 0.0   Min.   : 0.00   Min.   : 0.00  
##  Class :character   Class :character   Class :character   Class :character   1st Qu.:81.00   1st Qu.:84.00   1st Qu.:86.0   1st Qu.:90.00   1st Qu.:89.00  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character   Median :93.00   Median :93.00   Median :95.0   Median :95.00   Median :95.00  
##                                                                              Mean   :86.43   Mean   :87.77   Mean   :89.5   Mean   :90.27   Mean   :90.75  
##                                                                              3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.0   3rd Qu.:98.00   3rd Qu.:99.00  
##                                                                              Max.   :99.00   Max.   :99.00   Max.   :99.0   Max.   :99.00   Max.   :99.00  
##                                                                              NA&#39;s   :11      NA&#39;s   :11      NA&#39;s   :11     NA&#39;s   :11      NA&#39;s   :11     
##       2016            2015            2014            2013            2012            2011            2010            2009            2008            2007     
##  Min.   :18.00   Min.   :24.00   Min.   :26.00   Min.   :27.00   Min.   :24.00   Min.   :23.00   Min.   :23.00   Min.   :21.00   Min.   :23.00   Min.   :23.0  
##  1st Qu.:88.00   1st Qu.:88.25   1st Qu.:90.00   1st Qu.:91.25   1st Qu.:91.75   1st Qu.:90.00   1st Qu.:90.00   1st Qu.:90.00   1st Qu.:89.75   1st Qu.:89.0  
##  Median :96.00   Median :96.00   Median :96.00   Median :96.00   Median :96.00   Median :97.00   Median :96.00   Median :96.00   Median :96.00   Median :95.0  
##  Mean   :90.63   Mean   :90.35   Mean   :91.34   Mean   :91.54   Mean   :92.21   Mean   :91.66   Mean   :91.74   Mean   :91.33   Mean   :91.43   Mean   :90.7  
##  3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.0  
##  Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.0  
##  NA&#39;s   :11      NA&#39;s   :10      NA&#39;s   :10      NA&#39;s   :10      NA&#39;s   :8       NA&#39;s   :8       NA&#39;s   :9       NA&#39;s   :8       NA&#39;s   :8       NA&#39;s   :7     
##       2006           2005            2004            2003            2002            2001            2000            1999            1998            1997      
##  Min.   :21.0   Min.   :20.00   Min.   :18.00   Min.   :17.00   Min.   :16.00   Min.   :16.00   Min.   :16.00   Min.   :16.00   Min.   :16.00   Min.   :15.00  
##  1st Qu.:88.0   1st Qu.:86.50   1st Qu.:85.00   1st Qu.:83.00   1st Qu.:82.00   1st Qu.:82.00   1st Qu.:82.00   1st Qu.:82.00   1st Qu.:81.00   1st Qu.:80.75  
##  Median :96.0   Median :95.00   Median :95.00   Median :93.00   Median :92.00   Median :93.00   Median :93.00   Median :93.00   Median :92.00   Median :94.00  
##  Mean   :90.4   Mean   :89.42   Mean   :88.76   Mean   :88.22   Mean   :87.36   Mean   :87.47   Mean   :87.41   Mean   :87.01   Mean   :86.29   Mean   :85.96  
##  3rd Qu.:99.0   3rd Qu.:98.00   3rd Qu.:99.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00  
##  Max.   :99.0   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00  
##  NA&#39;s   :7      NA&#39;s   :9       NA&#39;s   :8       NA&#39;s   :8       NA&#39;s   :8       NA&#39;s   :10      NA&#39;s   :10      NA&#39;s   :10      NA&#39;s   :12      NA&#39;s   :12     
##       1996            1995            1994            1993            1992            1991            1990            1989            1988            1987      
##  Min.   :14.00   Min.   :14.00   Min.   :13.00   Min.   :13.00   Min.   :13.00   Min.   :12.00   Min.   :12.00   Min.   : 8.00   Min.   :14.00   Min.   :14.00  
##  1st Qu.:80.00   1st Qu.:81.00   1st Qu.:80.25   1st Qu.:79.00   1st Qu.:79.00   1st Qu.:76.00   1st Qu.:77.00   1st Qu.:74.25   1st Qu.:66.00   1st Qu.:60.50  
##  Median :93.00   Median :93.00   Median :93.00   Median :91.00   Median :90.00   Median :90.00   Median :91.00   Median :89.50   Median :86.00   Median :80.00  
##  Mean   :86.39   Mean   :86.57   Mean   :85.25   Mean   :84.04   Mean   :83.54   Mean   :83.04   Mean   :84.13   Mean   :81.07   Mean   :77.67   Mean   :73.69  
##  3rd Qu.:98.00   3rd Qu.:97.00   3rd Qu.:97.00   3rd Qu.:96.00   3rd Qu.:97.00   3rd Qu.:96.00   3rd Qu.:96.75   3rd Qu.:96.00   3rd Qu.:95.00   3rd Qu.:93.00  
##  Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00  
##  NA&#39;s   :11      NA&#39;s   :11      NA&#39;s   :10      NA&#39;s   :11      NA&#39;s   :15      NA&#39;s   :33      NA&#39;s   :34      NA&#39;s   :34      NA&#39;s   :35      NA&#39;s   :37     
##       1986            1985            1984            1983            1982            1981            1980      
##  Min.   : 4.00   Min.   : 2.00   Min.   : 2.00   Min.   : 2.00   Min.   : 1.00   Min.   : 1.00   Min.   : 2.00  
##  1st Qu.:53.00   1st Qu.:47.00   1st Qu.:41.75   1st Qu.:40.50   1st Qu.:37.25   1st Qu.:32.00   1st Qu.:33.25  
##  Median :76.00   Median :74.00   Median :66.00   Median :65.00   Median :61.50   Median :58.50   Median :61.50  
##  Mean   :69.52   Mean   :65.55   Mean   :60.77   Mean   :60.53   Mean   :58.59   Mean   :55.74   Mean   :58.19  
##  3rd Qu.:92.00   3rd Qu.:89.00   3rd Qu.:84.25   3rd Qu.:83.00   3rd Qu.:83.00   3rd Qu.:81.00   3rd Qu.:85.00  
##  Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00  
##  NA&#39;s   :37      NA&#39;s   :39      NA&#39;s   :44      NA&#39;s   :52      NA&#39;s   :58      NA&#39;s   :64      NA&#39;s   :90</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data.html#cb8-1" aria-hidden="true" tabindex="-1"></a>vaccine_cleaned <span class="ot">&lt;-</span> (vaccine <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">34</span>))</span></code></pre></div>
<pre><code>##      iso3             country               2021            2020            2019           2018            2017            2016            2015      
##  Length:168         Length:168         Min.   : 0.00   Min.   : 0.00   Min.   : 0.0   Min.   : 0.00   Min.   : 0.00   Min.   :18.00   Min.   :24.00  
##  Class :character   Class :character   1st Qu.:81.00   1st Qu.:84.00   1st Qu.:86.0   1st Qu.:90.00   1st Qu.:89.00   1st Qu.:88.00   1st Qu.:88.25  
##  Mode  :character   Mode  :character   Median :93.00   Median :93.00   Median :95.0   Median :95.00   Median :95.00   Median :96.00   Median :96.00  
##                                        Mean   :86.43   Mean   :87.77   Mean   :89.5   Mean   :90.27   Mean   :90.75   Mean   :90.63   Mean   :90.35  
##                                        3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.0   3rd Qu.:98.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00  
##                                        Max.   :99.00   Max.   :99.00   Max.   :99.0   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00  
##                                        NA&#39;s   :11      NA&#39;s   :11      NA&#39;s   :11     NA&#39;s   :11      NA&#39;s   :11      NA&#39;s   :11      NA&#39;s   :10     
##       2014            2013            2012            2011            2010            2009            2008            2007           2006           2005      
##  Min.   :26.00   Min.   :27.00   Min.   :24.00   Min.   :23.00   Min.   :23.00   Min.   :21.00   Min.   :23.00   Min.   :23.0   Min.   :21.0   Min.   :20.00  
##  1st Qu.:90.00   1st Qu.:91.25   1st Qu.:91.75   1st Qu.:90.00   1st Qu.:90.00   1st Qu.:90.00   1st Qu.:89.75   1st Qu.:89.0   1st Qu.:88.0   1st Qu.:86.50  
##  Median :96.00   Median :96.00   Median :96.00   Median :97.00   Median :96.00   Median :96.00   Median :96.00   Median :95.0   Median :96.0   Median :95.00  
##  Mean   :91.34   Mean   :91.54   Mean   :92.21   Mean   :91.66   Mean   :91.74   Mean   :91.33   Mean   :91.43   Mean   :90.7   Mean   :90.4   Mean   :89.42  
##  3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.00   3rd Qu.:99.0   3rd Qu.:99.0   3rd Qu.:98.00  
##  Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.0   Max.   :99.0   Max.   :99.00  
##  NA&#39;s   :10      NA&#39;s   :10      NA&#39;s   :8       NA&#39;s   :8       NA&#39;s   :9       NA&#39;s   :8       NA&#39;s   :8       NA&#39;s   :7      NA&#39;s   :7      NA&#39;s   :9      
##       2004            2003            2002            2001            2000            1999            1998            1997            1996            1995      
##  Min.   :18.00   Min.   :17.00   Min.   :16.00   Min.   :16.00   Min.   :16.00   Min.   :16.00   Min.   :16.00   Min.   :15.00   Min.   :14.00   Min.   :14.00  
##  1st Qu.:85.00   1st Qu.:83.00   1st Qu.:82.00   1st Qu.:82.00   1st Qu.:82.00   1st Qu.:82.00   1st Qu.:81.00   1st Qu.:80.75   1st Qu.:80.00   1st Qu.:81.00  
##  Median :95.00   Median :93.00   Median :92.00   Median :93.00   Median :93.00   Median :93.00   Median :92.00   Median :94.00   Median :93.00   Median :93.00  
##  Mean   :88.76   Mean   :88.22   Mean   :87.36   Mean   :87.47   Mean   :87.41   Mean   :87.01   Mean   :86.29   Mean   :85.96   Mean   :86.39   Mean   :86.57  
##  3rd Qu.:99.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:98.00   3rd Qu.:97.00  
##  Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00   Max.   :99.00  
##  NA&#39;s   :8       NA&#39;s   :8       NA&#39;s   :8       NA&#39;s   :10      NA&#39;s   :10      NA&#39;s   :10      NA&#39;s   :12      NA&#39;s   :12      NA&#39;s   :11      NA&#39;s   :11     
##       1994            1993            1992      
##  Min.   :13.00   Min.   :13.00   Min.   :13.00  
##  1st Qu.:80.25   1st Qu.:79.00   1st Qu.:79.00  
##  Median :93.00   Median :91.00   Median :90.00  
##  Mean   :85.25   Mean   :84.04   Mean   :83.54  
##  3rd Qu.:97.00   3rd Qu.:96.00   3rd Qu.:97.00  
##  Max.   :99.00   Max.   :99.00   Max.   :99.00  
##  NA&#39;s   :10      NA&#39;s   :11      NA&#39;s   :15</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data.html#cb10-1" aria-hidden="true" tabindex="-1"></a>vaccine_pivoted <span class="ot">&lt;-</span> vaccine_cleaned <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="data.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="st">&#39;iso3&#39;</span>,<span class="st">&#39;country&#39;</span>),</span>
<span id="cb10-3"><a href="data.html#cb10-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&#39;year&#39;</span>,</span>
<span id="cb10-4"><a href="data.html#cb10-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&#39;vaccination_rate&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="data.html#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">substr</span>(year, <span class="dv">1</span>, <span class="dv">5</span>))</span>
<span id="cb10-6"><a href="data.html#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="data.html#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vaccine_pivoted)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   iso3  country     year  vaccination_rate
##   &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;
## 1 AFG   Afghanistan 2021                84
## 2 AFG   Afghanistan 2020                87
## 3 AFG   Afghanistan 2019                86
## 4 AFG   Afghanistan 2018                89
## 5 AFG   Afghanistan 2017                84
## 6 AFG   Afghanistan 2016                78</code></pre>
</div>
<div id="population" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Population<a href="data.html#population" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Read data</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data.html#cb12-1" aria-hidden="true" tabindex="-1"></a>df_population <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../Datasets/population.csv&quot;</span>)</span>
<span id="cb12-2"><a href="data.html#cb12-2" aria-hidden="true" tabindex="-1"></a>df_population_1 <span class="ot">&lt;-</span> df_population <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="data.html#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">25</span><span class="sc">:</span><span class="dv">66</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="data.html#cb12-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="st">&#39;Country.Name&#39;</span>, <span class="st">&#39;Country.Code&#39;</span>),</span>
<span id="cb12-5"><a href="data.html#cb12-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">names_to =</span> <span class="st">&#39;year&#39;</span>,</span>
<span id="cb12-6"><a href="data.html#cb12-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">values_to =</span> <span class="st">&#39;population&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="data.html#cb12-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">substr</span>(year, <span class="dv">2</span>, <span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="data.html#cb12-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rename</span>(<span class="at">country =</span> Country.Name, </span>
<span id="cb12-9"><a href="data.html#cb12-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">iso3 =</span> Country.Code)</span>
<span id="cb12-10"><a href="data.html#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_population_1)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country iso3  year  population
##   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;
## 1 Aruba   ABW   1980       60097
## 2 Aruba   ABW   1981       60561
## 3 Aruba   ABW   1982       61341
## 4 Aruba   ABW   1983       62213
## 5 Aruba   ABW   1984       62826
## 6 Aruba   ABW   1985       63024</code></pre>
<ul>
<li>Merged with TB data set</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data.html#cb14-1" aria-hidden="true" tabindex="-1"></a>df_tb_cleaning <span class="ot">&lt;-</span> <span class="fu">merge</span>(df_population_1, tb_cleaning_3, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;iso3&#39;</span>, <span class="st">&#39;year&#39;</span>))</span>
<span id="cb14-2"><a href="data.html#cb14-2" aria-hidden="true" tabindex="-1"></a>df_continent <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Datasets/raw/continents2.csv&quot;</span>)</span>
<span id="cb14-3"><a href="data.html#cb14-3" aria-hidden="true" tabindex="-1"></a>df_continent_1 <span class="ot">&lt;-</span> df_continent <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="data.html#cb14-4" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">select</span>(alpha<span class="fl">.3</span>, region) <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="data.html#cb14-5" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">rename</span>(<span class="at">iso3 =</span> alpha<span class="fl">.3</span>, <span class="at">continent =</span> region)</span>
<span id="cb14-6"><a href="data.html#cb14-6" aria-hidden="true" tabindex="-1"></a>df_tb_cleaning_1 <span class="ot">&lt;-</span> <span class="fu">merge</span>(df_continent_1, df_tb_cleaning, <span class="at">by =</span> <span class="st">&#39;iso3&#39;</span>)</span>
<span id="cb14-7"><a href="data.html#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_tb_cleaning_1)</span></code></pre></div>
<pre><code>##   iso3 continent year country.x population country.y new_sp new_labconf c_newinc hivtest hivtest_pos new_sp_m014 new_sp_m1524 new_sp_m2534 new_sp_m3544
## 1  ABW  Americas 2012     Aruba     102565     Aruba      6           6       28       1           1          NA           NA           NA            2
## 2  ABW  Americas 2013     Aruba     103165     Aruba     NA           2       11      NA          NA          NA           NA           NA            2
## 3  ABW  Americas 2010     Aruba     101665     Aruba      4           6        6      NA          NA          NA           NA           NA           NA
## 4  ABW  Americas 2011     Aruba     102050     Aruba      7           7        8      NA          NA          NA           NA           NA           NA
## 5  ABW  Americas 2017     Aruba     105361     Aruba     NA           2        8      NA           0           0            0            0            1
## 6  ABW  Americas 2018     Aruba     105846     Aruba     NA           5        5      NA          NA           0            0            0            0
##   new_sp_m4554 new_sp_m5564 new_sp_m65 new_sp_f014 new_sp_f1524 new_sp_f2534 new_sp_f3544 new_sp_f4554 new_sp_f5564 new_sp_f65
## 1            3           NA         NA           1            4           NA            2            1           NA          1
## 2            1            2         NA          NA            1           NA            2            1            2          2
## 3           NA           NA         NA          NA           NA           NA           NA           NA           NA         NA
## 4            4           NA          1          NA           NA            1           NA           NA           NA          1
## 5            1            0          1           0            1            0            1            2            0          1
## 6            2            2          0           0            0            0            0            0            1          0</code></pre>
</div>
<div id="hiv-infections" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> HIV infections<a href="data.html#hiv-infections" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Read Data</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data.html#cb16-1" aria-hidden="true" tabindex="-1"></a>df_hiv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../Datasets/number-of-people-living-with-hiv.csv&quot;</span>)</span>
<span id="cb16-2"><a href="data.html#cb16-2" aria-hidden="true" tabindex="-1"></a>df_hiv_1 <span class="ot">&lt;-</span> df_hiv <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="data.html#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="data.html#cb16-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rename</span>(<span class="at">iso3 =</span> Code,</span>
<span id="cb16-5"><a href="data.html#cb16-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">year =</span> Year,</span>
<span id="cb16-6"><a href="data.html#cb16-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">hiv_num =</span> Prevalence...HIV.AIDS...Sex..Both...Age..All.Ages..Number.)</span>
<span id="cb16-7"><a href="data.html#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="data.html#cb16-8" aria-hidden="true" tabindex="-1"></a>df_tb_cleaning_2 <span class="ot">&lt;-</span> <span class="fu">merge</span>(df_tb_cleaning_1, df_hiv_1, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;iso3&#39;</span>, <span class="st">&#39;year&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="data.html#cb16-9" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">mutate</span>(<span class="at">tb_infection_rate =</span> c_newinc<span class="sc">/</span>population,</span>
<span id="cb16-10"><a href="data.html#cb16-10" aria-hidden="true" tabindex="-1"></a>                           <span class="at">hiv_tb_infection_rate =</span> hivtest_pos<span class="sc">/</span>hiv_num)</span></code></pre></div>
<pre><code>##   iso3 year continent   country.x population   country.y new_sp new_labconf c_newinc hivtest hivtest_pos new_sp_m014 new_sp_m1524 new_sp_m2534 new_sp_m3544
## 1  AFG 1990      Asia Afghanistan   12412311 Afghanistan     NA          NA     4332      NA          NA          NA           NA           NA           NA
## 2  AFG 1991      Asia Afghanistan   13299016 Afghanistan     NA          NA    23067      NA          NA          NA           NA           NA           NA
## 3  AFG 1997      Asia Afghanistan   19357126 Afghanistan    618          NA     1290      NA          NA           0           10            6            3
## 4  AFG 1998      Asia Afghanistan   19737770 Afghanistan   1833          NA     3084      NA          NA          30          129          128           90
## 5  AFG 1999      Asia Afghanistan   20170847 Afghanistan   1669          NA     3314      NA          NA           8           55           55           47
## 6  AFG 2000      Asia Afghanistan   20779957 Afghanistan   2892          NA     7107      NA          NA          52          228          183          149
##   new_sp_m4554 new_sp_m5564 new_sp_m65 new_sp_f014 new_sp_f1524 new_sp_f2534 new_sp_f3544 new_sp_f4554 new_sp_f5564 new_sp_f65 hiv_num tb_infection_rate
## 1           NA           NA         NA          NA           NA           NA           NA           NA           NA         NA     418      3.490083e-04
## 2           NA           NA         NA          NA           NA           NA           NA           NA           NA         NA     495      1.734489e-03
## 3            5            2          0           5           38           36           14            8            0          1     959      6.664212e-05
## 4           89           64         41          45          350          419          194          118           61         20     998      1.562487e-04
## 5           34           21          8          25          139          160          110           50           25          8    1024      1.642965e-04
## 6          129           94         80          93          414          565          339          205           99         36    1062      3.420123e-04
##   hiv_tb_infection_rate
## 1                    NA
## 2                    NA
## 3                    NA
## 4                    NA
## 5                    NA
## 6                    NA</code></pre>
</div>
</div>
<div id="missing-value-analysis" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Missing value analysis<a href="data.html#missing-value-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="tb-notification-and-outcome-dataset-1" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> TB notification and outcome dataset<a href="data.html#tb-notification-and-outcome-dataset-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Before Cleaning</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(tb_cleaning))</span></code></pre></div>
<pre><code>##        country           iso3           year         new_sp    new_labconf       c_newinc newrel_hivtest  newrel_hivpos        hivtest    hivtest_pos 
##              0              0              0           5020           4843            542           7615           7619           6876           6905 
##    new_sp_m014   new_sp_m1524   new_sp_m2534   new_sp_m3544   new_sp_m4554   new_sp_m5564     new_sp_m65    newrel_m014   newrel_m1524   newrel_m2534 
##           5754           5718           5721           5708           5704           5709           5718           7143           7179           7175 
##   newrel_m3544   newrel_m4554   newrel_m5564     newrel_m65    new_sp_f014   new_sp_f1524   new_sp_f2534   new_sp_f3544   new_sp_f4554   new_sp_f5564 
##           7174           7173           7173           7176           5752           5732           5726           5727           5722           5731 
##     new_sp_f65    newrel_f014   newrel_f1524   newrel_f2534   newrel_f3544   newrel_f4554   newrel_f5564     newrel_f65 
##           5729           7147           7178           7174           7174           7175           7177           7179</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(tb_cleaning)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<ul>
<li>After Cleaning</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(tb_cleaning_3))</span></code></pre></div>
<pre><code>##      country         iso3         year       new_sp  new_labconf     c_newinc      hivtest  hivtest_pos  new_sp_m014 new_sp_m1524 new_sp_m2534 new_sp_m3544 
##            0            0            0         4478         4301            0         5068         5101         3433         3433         3432         3418 
## new_sp_m4554 new_sp_m5564   new_sp_m65  new_sp_f014 new_sp_f1524 new_sp_f2534 new_sp_f3544 new_sp_f4554 new_sp_f5564   new_sp_f65 
##         3413         3419         3430         3435         3446         3437         3437         3433         3444         3444</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(tb_cleaning_3)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
</div>
<div id="vaccination-dataset-3" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Vaccination dataset<a href="data.html#vaccination-dataset-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Missing Pattern Before Drop</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(vaccine))</span></code></pre></div>
<pre><code>## unicef_region          iso3       country       vaccine          2021          2020          2019          2018          2017          2016          2015 
##             0             0             0             0            11            11            11            11            11            11            10 
##          2014          2013          2012          2011          2010          2009          2008          2007          2006          2005          2004 
##            10            10             8             8             9             8             8             7             7             9             8 
##          2003          2002          2001          2000          1999          1998          1997          1996          1995          1994          1993 
##             8             8            10            10            10            12            12            11            11            10            11 
##          1992          1991          1990          1989          1988          1987          1986          1985          1984          1983          1982 
##            15            33            34            34            35            37            37            39            44            52            58 
##          1981          1980 
##            64            90</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(vaccine)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-41-1.png" width="672" />
* Missing Pattern After Drop</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(vaccine_cleaned))</span></code></pre></div>
<pre><code>##    iso3 country    2021    2020    2019    2018    2017    2016    2015    2014    2013    2012    2011    2010    2009    2008    2007    2006    2005    2004 
##       0       0      11      11      11      11      11      11      10      10      10       8       8       9       8       8       7       7       9       8 
##    2003    2002    2001    2000    1999    1998    1997    1996    1995    1994    1993    1992 
##       8       8      10      10      10      12      12      11      11      10      11      15</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(vaccine)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-43-1.png" width="672" />
### Population</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(df_population))</span></code></pre></div>
<pre><code>##   Country.Name   Country.Code Indicator.Name Indicator.Code          X1960          X1961          X1962          X1963          X1964          X1965 
##              0              0              0              0              2              2              2              2              2              2 
##          X1966          X1967          X1968          X1969          X1970          X1971          X1972          X1973          X1974          X1975 
##              2              2              2              2              2              2              2              2              2              2 
##          X1976          X1977          X1978          X1979          X1980          X1981          X1982          X1983          X1984          X1985 
##              2              2              2              2              2              2              2              2              2              2 
##          X1986          X1987          X1988          X1989          X1990          X1991          X1992          X1993          X1994          X1995 
##              2              2              2              2              1              1              2              2              2              1 
##          X1996          X1997          X1998          X1999          X2000          X2001          X2002          X2003          X2004          X2005 
##              1              1              1              1              1              1              1              1              1              1 
##          X2006          X2007          X2008          X2009          X2010          X2011          X2012          X2013          X2014          X2015 
##              1              1              1              1              1              1              2              2              2              2 
##          X2016          X2017          X2018          X2019          X2020          X2021              X 
##              2              2              2              2              2              2            266</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(df_population)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-45-1.png" width="672" /></p>
</div>
<div id="hiv-infections-1" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> HIV infections<a href="data.html#hiv-infections-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(df_hiv))</span></code></pre></div>
<pre><code>##                                                     Entity                                                       Code 
##                                                          0                                                          0 
##                                                       Year Prevalence...HIV.AIDS...Sex..Both...Age..All.Ages..Number. 
##                                                          0                                                          0</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(df_hiv)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-47-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="proposal.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yichuang25/EDAV-Final-Project-9/edit/main/data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/yichuang25/EDAV-Final-Project-9/blob/main/data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
